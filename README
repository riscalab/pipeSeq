#########################################################################################
ATACseq: run fastq2bam as subworkflow and call peaks
#########################################################################################
npagane | 190702 | risca lab

######
to run
######

python ATACseq.py <1> <2> --<opts>

where:
    <1> =  how many cores to run pipeline with (integer, i.e. 14)
    <2> = directory with fastq/bam files and desired working directory (string, i.e. path/to/fastq)
    --<opts> additional options:
        --genomeRef = genome reference for alignment (string, i.e. path/to/genome)
            default: "/rugpfs/fs0/risc_lab/scratch/nvelez/genomes/Homo_sapiens/UCSC/hg38/Sequence/Bowtie2Index/genome"
        --blacklist = blacklist for filtering (string, i.e. path/to/blacklist)
            default: "/rugpfs/fs0/risc_lab/scratch/nvelez/blacklists/ATAC_blacklist.bed"
        --set = the set number of the experiment (int, i.e. 001)
            default: "001"
        --mapq = the map quality threshold for alignment (int, i.e. 30)
            default: "30"
        --index = whether there are fastq files for the index reads or not (boolean, i.e. True)
            default: "True"
        --snakemake = any snakemake flags for compilation (string, i.e. unlock)
            default: ""

###########
environment
###########

conda activate fastq2bam

* uses ATACseq conda env in specific rules to avoid version clashes
* the environment is saved in envs/ATACseq.yml using the command:
	conda env export > ATACseq.yml
** every time the conda env is updated, the yml file needs to be regenerated

##############
file structure
##############

ATACseq.py <executable>
Snakefile <pipeline>
scripts/* <R and python scripts to call in pipeline>
envs/* <stores conda environments for snakemake rules>
